# **TTS (Text To Speech) API \- NvrTtsEnUs**

The Text-to-Speech (TTS) API endpoint allows you to obtain speech synthesis from raw text.

## **Introduction**

Text-to-Speech (TTS) is a subfield of Artificial Intelligence (AI) that converts written text into spoken words. This TTS API operates as a two-stage pipeline, with a first model generating a mel spectrogram, then a second model using this mel spectrogram to generate speech. This speech synthesis system enables you to synthesize natural speech from raw transcriptions without any additional information.  
AI Endpoints makes it easy, with ready-to-use inference APIs. Discover how to use them:

## **Model concept and configuration**

These TTS models were developed by NVIDIA. The TTS AI Endpoint takes text as input and returns audio stream or audio buffer, along with additional optional metadata.  
Model configuration:

* Transcription mode: offline  
* Language Support: en-US, es-ES, de-DE, it-IT (please choose the corresponding endpoint \- e.g. *nvr-tts-en-us*)  
* Input type: Raw text  
* Voice name: English-US.Female-1, English-US.Male-1, English-US.Female-Calm, English-US.Female-Neutral, English-US.Female-Happy, English-US.Female-Angry, English-US.Female-Fearful, English-US.Female-Sad, English-US.Male-Calm, English-US.Male-Neutral, English-US.Male-Happy, English-US.Male-Angry, Spanish-ES-Female-1, Spanish-ES-Male-1, German-DE-Male-1, Italian-IT-Female-1, Italian-IT-Male-1, Mandarin-CN.Female-1, Mandarin-CN.Male-1, Mandarin-CN.Female-Calm, Mandarin-CN.Female-Neutral, Mandarin-CN.Male-Happy, Mandarin-CN.Male-Fearful, Mandarin-CN.Male-Sad, Mandarin-CN.Male-Calm, Mandarin-CN.Male-Neutral, Mandarin-CN.Male-Angry  
* Sample Rate: usually 22 000 Hz or 44 000 Hz

## **How to?**

The TTS endpoint offers you a wide range of transcription options. Learn how to use them with the following example:

### With a simple HTTP client (requests)

First install the *requests* library:  
pip install requests  
Next, export your access token to the *OVH\_AI\_ENDPOINTS\_ACCESS\_TOKEN* environment variable:  
export OVH\_AI\_ENDPOINTS\_ACCESS\_TOKEN=\<your-access-token\>  
*If you do not have an access token key yet, follow the instructions in the [AI Endpoints â€“ Getting Started](https://help.ovhcloud.com/csm/en-gb-public-cloud-ai-endpoints-getting-started?id=kb_article_view&sysparm_article=KB0065401).*  
Finally, run the following python code:  
import requests

url \= "https://nvr-tts-en-us.endpoints.kepler.ai.cloud.ovh.net/api/v1/tts/text\_to\_audio"

headers \= {  
    "accept": "application/octet-stream",  
    "Content-Type": "application/json",  
    "Authorization": f"Bearer {os.getenv('OVH\_AI\_ENDPOINTS\_ACCESS\_TOKEN')}",  
}

data \= {  
    "encoding": 1,  
    "language\_code": "en-US",  
    "sample\_rate\_hz": 16000,  
    "text": "We provide a set of managed tools designed for building your Machine Learning projects: AI Notebooks, AI Training, AI Deploy and AI Endpoints.",  
    "voice\_name": "English-US.Female-1"  
}

response \= requests.post(url, headers=headers, json=data)

if response.status\_code \== 200:  
    \# Save the audio content to a file  
    with open("output\_audio.wav", "wb") as audio\_file:  
        audio\_file.write(response.content)  
    print("Audio file saved as output\_audio.wav")  
else:  
    print("Error:", response.status\_code)  
Returning the following result:  
Audio file saved as output\_audio.wav

You are now able to play and use your generated audio file.

### With the gRPC RIVA client

Install RIVA client and audio libraries:  
pip install nvidia-riva-client numpy  
This use case deals with a basic example that returns the audio speech generated by the model:  
import numpy as np  
import IPython.display as ipd  
import riva.client

\# connect with riva tts server  
tts\_service \= riva.client.SpeechSynthesisService(  
                riva.client.Auth(  
                    uri="nvr-tts-en-us.endpoints-grpc.kepler.ai.cloud.ovh.net:443",  
                    use\_ssl=True,  
                )  
            )

\# set up config  
sample\_rate\_hz \= 44100  
req \= {  
        "language\_code"  : "en-US",                                 \# choose the corresponding language in the list: en-US / es-ES / de-DE / it-IT  
        "encoding"       : riva.client.AudioEncoding.LINEAR\_PCM ,  
        "sample\_rate\_hz" : sample\_rate\_hz,                          \# sample rate: 44.1KHz audio  
        "voice\_name"     : "English-US.Female-1"                    \# voices: \`English-US.Female-1\`, \`English-US.Male-1\`,   
                                                                    \#         \`English-US.Female-Calm\`, \`English-US.Female-Neutral\`,  
                                                                    \#         \`English-US.Female-Happy\`, \`English-US.Female-Angry\`,  
                                                                    \#         \`English-US.Female-Fearful\`, \`English-US.Female-Sad\`,  
                                                                    \#         \`English-US.Male-Calm\`, \`English-US.Male-Neutral\`,  
                                                                    \#         \`English-US.Male-Happy\`, \`English-US.Male-Angry\`,   
                                                                    \#         \`Spanish-ES-Female-1\`, \`Spanish-ES-Male-1\`,  
                                                                    \#         \`German-DE-Male-1\`, \`Italian-IT-Female-1\`,   
                                                                    \#         \`Italian-IT-Male-1\`, \`Mandarin-CN.Female-1\`,   
                                                                    \#         \`Mandarin-CN.Male-1\`, \`Mandarin-CN.Female-Calm\`,   
                                                                    \#         \`Mandarin-CN.Female-Neutral\`, \`Mandarin-CN.Male-Happy\`,  
                                                                    \#         \`Mandarin-CN.Male-Fearful\`, \`Mandarin-CN.Male-Sad\`,  
                                                                    \#         \`Mandarin-CN.Male-Calm\`, \`Mandarin-CN.Male-Neutral\`,  
                                                                    \#         \`Mandarin-CN.Male-Angry\`  
}

\# input text  
req\["text"\] \= "We provide a set of managed tools designed for building your Machine Learning projects: AI Notebooks, AI Training, AI Deploy and AI Endpoints."

\# return response  
response \= tts\_service.synthesize(\*\*req)  
audio\_samples \= np.frombuffer(response.audio, dtype=np.int16)

\# play output audio  
ipd.Audio(audio\_samples, rate=sample\_rate\_hz)  
